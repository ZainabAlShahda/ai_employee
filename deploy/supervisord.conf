[supervisord]
nodaemon=true
logfile=/var/log/supervisord.log
logfile_maxbytes=10MB
logfile_backups=3
loglevel=info

; monitor.py spawns all child processes (orchestrator, watchers, heartbeat, sync).
; supervisord only needs to keep monitor alive â€” it handles everything else.
[program:monitor]
command=uv run python health/monitor.py
directory=/app
autostart=true
autorestart=true
startretries=5
stdout_logfile=/var/log/agent_monitor.log
stdout_logfile_maxbytes=10MB
stdout_logfile_backups=3
stderr_logfile=/var/log/agent_monitor.err.log
stderr_logfile_maxbytes=10MB
stderr_logfile_backups=3
environment=AGENT_MODE="cloud",VAULT_PATH="/vault"
